<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <title>PageJS</title>

  <link rel="stylesheet" href="">
</head>
<body>

  <p id="message"></p>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a href="/user">User</a></li>
    <li><a href="/user/jandrey15">User Name</a></li>
    <li><a href="/notfound">Not found</a></li>
    <li><a href="/ergtgt">Cualquier cosa</a></li>
    <li><a href="/cambio">Cambiar nombre apellido</a></li>
  </ul>
  <script src="https://cdn.rawgit.com/visionmedia/page.js/master/page.js"></script>
  <script type="text/javascript">
    page('/', index)
    page('/user', user)
    page('/user/:username', user)
    page('/cambio', nombre, apellido)
    page('*', notfound)
    page()

    function index() {
      document.getElementById('message')
        .textContent = 'Viewing home'
    }

    function user(ctx) {
      document.getElementById('message')
        .textContent = `Viewing user ${ctx.params.username || ''}`
    }

    function notfound(ctx) {
      document.getElementById('message')
        .textContent = 'Viewing not found'
    }

    function nombre(ctx, next) {
      document.getElementById('message')
        .textContent = 'Viewing john'
      ctx.nombre = 'John'
      next()
    }

    function apellido(ctx) {
      setTimeout(() => {
        document.getElementById('message')
          .textContent = `Viewing ${ctx.nombre} Serrano`
      }, 2000)
    }
  </script>

</body>
</html>